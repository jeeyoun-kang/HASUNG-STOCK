<!DOCTYPE html>
<html lang="en">

<style>
  a {
    text-decoration-line: none;

  }

  a:link {
    color: rgb(114, 133, 232);
  }

  /* a:visited {
  color : black;
} */
  a:hover {
    color: red;
  }

  a:active {
    color: green
  }

  .main-wrap {
    width: 100%;
    height: 150px;
    margin: 10px auto;
    position: relative;
  }

  .main-wrap img {
    width: 100%;
    height: 150px;
    background-size: 100% 100%;
    filter: brightness(30%);
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
  }

  .main-text {
    color: #fff;
    padding: 5px 10px;
    text-align: center;
    position: absolute;
    top: 10%;
    font-size: 50px;
    font-weight: bolder;
  }

  .main-text2 {
    color: rgba(255, 255, 255, 0.671);
    padding: 5px 10px;
    text-align: center;
    position: absolute;
    top: 55%;
    font-size: 15px;
  }

  .borderbox {
    
    outline-style: auto;
    outline-color: white;
    width: 100%;
  }

  .short-sort {
    font-family: 'Do Hyeon', sans-serif;
    font-size: large;
    font-weight: bolder;
    float: left;
    width: 10%;
    height: 100%;
  }

  .Sort {
    font-family: 'Do Hyeon', sans-serif;
    float: left;
    height: 100%;
  }

  .list {
    padding-left: 25px;
    font-family: 'Do Hyeon', sans-serif;
    font-size: xx-large;
  }

  .Sort-current {
    font-family: 'Do Hyeon', sans-serif;
    font-size: large;
    font-weight: bolder;
    width: auto;
    height: 100%;
  }

  .logout {

    font-family: 'Do Hyeon', sans-serif;
    top: 60px;
    right: -190px;
  }

  .DL {
    font-family: 'Do Hyeon', sans-serif;

    top: 30px;
    right: -260px;

  }

  .spacing {
    font-family: 'Do Hyeon', sans-serif;
    position: relative;
    right: -10px;
  }

  .impormation {
    font-family: 'Do Hyeon', sans-serif;
    position: absolute;
    top: 80px;
    left: 1400px;
  }

  body {
    background-color: white;
    font-family: 'Noto Sans KR', sans-serif;
  }

  .button1 {
    font-family: 'Do Hyeon', sans-serif;
    text-align: auto;
    white-space: nowrap;
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
    color: #fff;
    border: none;
    position: relative;
    height: 30px;
    font-size: 20px;
    width: 100%;
    padding: 0 1.5em;
    cursor: pointer;
    transition: 800ms ease all;
  }

  .button2 {
    font-family: 'Do Hyeon', sans-serif;
    width: 100%;
    border-radius: 40px;
    /*박스 둥글게*/
    text-align: auto;
    white-space: nowrap;
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
    color: #fff;
    border: none;
    position: relative;
    height: 30px;
    font-size: 15px;
    width: auto;
    padding: 0 1.5em;
    cursor: pointer;
    transition: 800ms ease all;
    outline: none;
  }

  .button3 {
    font-family: 'Do Hyeon', sans-serif;
    text-align: auto;
    white-space: nowrap;
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
    color: #fff;
    border: none;
    position: relative;
    height: 30px;
    font-size: 18px;
    width: 16.66666666666%;
    padding: 0em;
    cursor: pointer;
    transition: 800ms ease all;
  }

  #textmining {
    font-family: 'Do Hyeon', sans-serif;
    text-align: auto;
    white-space: nowrap;
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
    color: #fff;
    border: none;
    position: relative;
    height: 30px;
    font-size: 20px;
    width: auto;
    padding: 0 1.5em;
    cursor: pointer;
    transition: 800ms ease all;
  }

  #DeepTable {
    font-family: 'Do Hyeon', sans-serif;
    text-align: auto;
    white-space: nowrap;
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
    color: #fff;
    border: none;
    position: relative;
    height: 30px;
    font-size: 20px;
    width: auto;
    padding: 0 1.5em;
    cursor: pointer;
    transition: 800ms ease all;
  }
  #highTable{
    font-family: 'Do Hyeon', sans-serif;
    text-align: auto;
    white-space: nowrap;
    background: linear-gradient(to left, rgb(132, 118, 255), rgb(88, 145, 252));
    color: #fff;
    border: none;
    position: relative;
    height: 30px;
    font-size: 20px;
    width: auto;
    padding: 0 1.5em;
    cursor: pointer;
    transition: 800ms ease all;
  }
  

  table.current{
    font-size: 14pt;
  }
  div.inputtext{
    font-size: 14pt;
  }
  div {
    width: 100%;

  }

  div.left {
    width: 70%;
    float: left;


  }

  div.right {
    width: 30%;
    float: right;
    font-size: auto;
    font-weight: bolder;
    font-family: 'Do Hyeon', sans-serif;
  }

  div#textcanvas {
    width: 100%;
    margin-left: 60px;
  }

  div.dl {
    width: 100%;
    margin-top: -15px;
  }
  img{
    display: block;
    margin: auto;
  }
  
</style>

<head>
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
  <style type="text/css">
    .rolling_panel {
      position: relative;
      width: 1075px;
      height: 160px;
      margin: 0;
      padding: 0;
      
      overflow: hidden;
    }

    .rolling_panel ul {
      position: absolute;
      margin: 5px;
      padding: 0;
      list-style: none;
    }

    .rolling_panel ul li {
      float: left;
      width: 205px;
      height: 140px;
      margin: 5px;
    }
  </style>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HANSUNG STOCK</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/53a8c415f1.js" crossorigin="anonymous"></script>
</head>

<body>
  <script>

    function removeCheck() {

      if (confirm("로그아웃 하시겠습니까?") == true) {    //확인

        document.removefrm.submit();

      } else {   //취소

        return false;
      }

    }


  </script>
  <script>
    function submit1(frm) {
      
      frm.action = "/main/buy/";
      frm.submit();
      return true;
    }
    function submit2(frm) {
      
      frm.action = "/main/sell/";
      frm.submit();
      return true;
    }
    function submit3(frm) {
      alert("자동매매가 시작되었습니다.")
      frm.action = "/main/auto/";
      frm.submit();
      return true;
    }
    function submit4(frm) {
      frm.action = "/main/current/";
      frm.submit();
      return true;
    }
    function submit5(frm) {
      frm.action = "/main/dl/";
      frm.submit();
      return true;
    }
    function submit6(frm) {
      alert("자동매매가 취소되었습니다.")
      frm.action = "/main/fix/";
      frm.submit();

      return true;
    }
    function submit7(frm) {
      frm.action = "/main/chart/";
      frm.submit();
      return true;
    }
    function submit8(frm) {
      alert("취소 주문이 접수되었습니다.")
      frm.action = "/main/cancel/";
      frm.submit();

      return true;
    } 
  </script>
  <div class="main-wrap">
    <div class="main-image"><img
        src="https://png.pngtree.com/thumb_back/fh260/background/20190220/ourmid/pngtree-hand-painted-beautiful-literary-romantic-image_7292.jpg">
    </div>
    <div class="main-text">Hansung Stock</div>
    <div class="main-text2">https://github.com/transurffer/TestTrading</div>
  </div>
  <div class="right">

    <form id="logout" name="removefrm" action="/main/logout/" method="post">{% csrf_token %}
      <input class="button2 logout" type="button" value="로그아웃" style="margin-left: 235px; top:110px;" onclick="removeCheck()">
    </form>

    </br></br></br></br>
    
    <form id="testform" method="post" action="main/set/">{% csrf_token %}


    </br>
  </br>
</br>
</br>
      <div class="borderbox">
        <input class="button3 Sort" type="submit" value="검색"  onClick='return submit7(this.form);'>
        <input class="button3 Sort" type="submit" value="매수" onClick='return submit1(this.form);'>
        <input class="button3 Sort" type="submit" value="매도" onClick='return submit2(this.form);'>
        <input class="button3 Sort" type="submit" value="매매취소" onClick='return submit8(this.form);'>
        <input class="button3 Sort" type="submit" value="자동매매" onClick='return submit3(this.form);'>
        <input class="button3 Sort" type="submit" value="자동매매취소" onClick='return submit6(this.form);'>
       
      </div>
    </br>
    <div class="inputtext">
      </br>종목 : <input name='stockcode2' type="text" autocomplete="off" style="width:150px;">&nbsp;&nbsp;퍼센트(자동매매) : <input name='stockpercent' type="number" step="0.01" style="width:150px;">
      </br>수량 : <input name='stockvalue' type="number" step="0.01" style="width:150px;">
    
      </br>단가 : <input name='stockvalue2' type="number" step="0.01" style="width:150px;">
    </div>
    </form>
  </br>
    <form id="testform2" method="post" action="main/set/">{% csrf_token %}
      <div class="borderbox">
        <input class="button1" type="submit" value="계좌정보" onClick='return submit4(this.form);'>
      </div>
   
      <table class="current" width="200" height="250">
        <tr>
          <td>{{hi}}</td>
          <td>{{hi1}}</td>
        </tr>
        <tr>
          <td>{{money}}</td>
          <td> {{money1}}</td>
        </tr>
        <tr>
          <td>{{profit}}</td>
          <td> {{profit1}}</td>
        </tr>
        <tr>
          <td>{{event}}</td>
          <td>{{event1}}</td>
        </tr>
        <tr>
          <td>{{name}}</td>
          <td>{{acc}}</td>
        </tr>
      </table>

    </form>
    </br>
    <style>
      #Sen {
        /* border: 1px solid black; */
        background-color: rgba(255, 255, 255, 0);
        /*투명 배경*/
        right: 175px;
        position: absolute;
        top: 920px;
      }

      #Arrow {
        right: 175px;
        background-color: rgba(255, 255, 255, 0);
        position: absolute;
        top: 920px;
      }

      #pos {
        position: relative;
        left: 30px;
        top: 220px;
        font-weight: bold;
      }

      #neg {
        position: relative;
        left: -235px;
        top: 220px;
        font-weight: bold;
      }

      #title {
        position: relative;
        top: 50px;
        font-size: 1.5em;
        text-align: center;
        font-weight: bold;
        margin-left: 120px;
      }
    </style>
    <button id="textmining" style="width:180px;">Text-Mining</button>
    <button id="DeepTable" style="width:180px;">DL TOP20</button>
    <button id="highTable" style="width:180px;">Volumn Rising</button>


    <div id="textcanvas">
      <span id="title">Text-Mining</span></br>
      <span id="title">공포-탐욕 지수</span>
      <canvas id="Sen" width='300' height='300'></canvas>
      <canvas id="Arrow" width="300" height="300"></canvas>

      <span id="neg">FEAR</span>
      <span id="pos">GREED</span>

    </div>

    <div id="deeptable" class="dl">
      <table border="1" width="500" height="400">
        <caption style="font-size:24px;">DL TOP20</caption>
        <tr>
          <th>RANK</th>
          <th>PERCENT</th>
          <th>NAME</th>
          <th>RANK</th>
          <th>PERCENT</th>
          <th>NAME</th>
        </tr>
        <tr>
          <td align="center">1</td>
          <td>0.626715</td>
          <td>강원랜드</td>
          <td align="center">11</td>
          <td>0.577988</td>
          <td>셀트리온헬스케어</td>
        </tr>
        <tr>
          <td align="center">2</td>
          <td>0.612745</td>
          <td>에스티팜</td>
          <td align="center">12</td>
          <td>0.577624</td>
          <td>파라다이스</td>
        </tr>
        <tr>
          <td align="center">3</td>
          <td>0.6126</td>
          <td>펄어비스</td>
          <td align="center">13</td>
          <td>0.576816</td>
          <td>SK바이오팜</td>
        </tr>
        <tr>
          <td align="center">4</td>
          <td>0.603948</td>
          <td>한미사이언스</td>
          <td align="center">14</td>
          <td>0.576254</td>
          <td>카카오게임즈</td>
        </tr>
        <tr>
          <td align="center">5</td>
          <td>0.596118</td>
          <td>솔루스첨단소재</td>
          <td align="center">15</td>
          <td>0.571697</td>
          <td>카카오</td>
        </tr>
        <tr>
          <td align="center">6</td>
          <td>0.592024</td>
          <td>삼성바이오로직스</td>
          <td align="center">16</td>
          <td>0.570198</td>
          <td>한전기술</td>
        </tr>
        <tr>
          <td align="center">7</td>
          <td>0.587044</td>
          <td>엘앤에프</td>
          <td align="center">17</td>
          <td>0.568164</td>
          <td>크래프톤</td>
        </tr>
        <tr>
          <td align="center">8</td>
          <td>0.586532</td>
          <td>에코프로비엠</td>
          <td align="center">18</td>
          <td>0.56784</td>
          <td>하이브</td>
        </tr>
        <tr>
          <td align="center">9</td>
          <td>0.583176</td>
          <td>일진머티리얼즈</td>
          <td align="center">19</td>
          <td>0.565935</td>
          <td>네이버</td>
        </tr>
        <tr>
          <td align="center">10</td>
          <td>0.578786</td>
          <td>포스코케미칼</td>
          <td align="center">20</td>
          <td>0.564762</td>
          <td>넷마블</td>
      </table>
    </div>
    
    <div id="hightest" class="dl">
      <table align="center" border="1" width="300" height="400" >
        <caption style="font-size:24px;">Volumn Rising</caption>
        <tr>
            <td align="center">1</td>
            <td align="center">DL</td>
        </tr>
        <tr>
            <td align="center">2</td>
            <td align="center">금호전기</td>
        </tr>  
        <tr>
            <td align="center">3</td>
            <td align="center">고려산업</td>
        </tr>
        <tr>
            <td align="center">4</td>
            <td align="center">대구백화점</td>
        </tr>
        <tr>
            <td align="center">5</td>

            <td align="center">신성이엔지</td>
        </tr>
        <tr>
            <td align="center">6</td>
            <td align="center">체시스</td>
        </tr>  
        <tr>
            <td align="center">7</td>
            <td align="center">다스코</td>
        </tr>  
      </table>
    </div>
    <script type="text/javascript">

      function init() {
        draw();
      }

      function hideCanvasText() {
        document.getElementById("textcanvas").style.visibility = 'hidden';
        document.getElementById("deeptable").style.visibility = 'visible';
        document.getElementById("hightest").style.visibility = 'hidden';
      }
      function hideCanvasTable() {
        document.getElementById("deeptable").style.visibility = 'hidden';
        document.getElementById("textcanvas").style.visibility = 'visible';
        document.getElementById("hightest").style.visibility = 'hidden';
      }
      function hideCanvasHigh() {
        document.getElementById("deeptable").style.visibility = 'collapse';
        document.getElementById("textcanvas").style.visibility = 'hidden';
        document.getElementById("hightest").style.visibility = 'visible';
      }
      document.getElementById("textmining").addEventListener("click", hideCanvasTable);
      document.getElementById("DeepTable").addEventListener("click", hideCanvasText);
      document.getElementById("highTable").addEventListener("click", hideCanvasHigh);


      var canvas = document.getElementById('Sen');
      var ctx = canvas.getContext('2d');
      var grd = ctx.createLinearGradient(0, 0, 350, 0);

      var canvas2 = document.getElementById('Arrow');
      var arrow = canvas2.getContext('2d');
      var bla = ctx.createLinearGradient(0, 0, 350, 0);

      function draw() {

        grd.addColorStop(0.2, 'red');
        grd.addColorStop(0.43, 'yellow');
        grd.addColorStop(0.8, 'green');
        bla.addColorStop(0, 'black');

        ctx.globalCompositeOperation = 'destination-over';
        ctx.clearRect(0, 0, 300, 300);
        arrow.clearRect(0, 0, 300, 300);
        ctx.fillStyle = grd;

        ctx.save();
        ctx.beginPath();
        ctx.arc(160, 150, 95, 0, Math.PI, true);
        ctx.moveTo(195, 150);
        ctx.lineTo(225, 150);
        ctx.arc(160, 150, 115, 0, Math.PI, true);
        ctx.moveTo(50, 75);
        ctx.lineTo(30, 75);
        ctx.fill('evenodd');
        ctx.closePath();

        var pos = 800;
        var neg = 1500;
        var a = pos / neg; /*ex 500/2000=>0.25*/
        var b = new Array(13);
        var g = 12;
        for (var i = 0; i < 13; i++) {
          b[i] = g--;
        }
        var c;

        var time = new Date();

        if (a > 12) { c = 12; } /* 예시 약:8000/700    c는->0~11 */
        else if (a > 11) { c = 11; }
        else if (a > 9) { c = 10; }
        else if (a > 7) { c = 9; }
        else if (a > 5) { c = 8; }
        else if (a > 3) { c = 7; }
        else if (a >= 1) { c = 6; }
        else if (a <= 0.1) { c = 0; }
        else if (a <= 0.2) { c = 1; }
        else if (a <= 0.4) { c = 2; }
        else if (a <= 0.5) { c = 3; }
        else if (a <= 0.6) { c = 4; }
        else if (a <= 0.8) { c = 5; }

        arrow.save();
        arrow.lineWidth = 5;
        arrow.fillStyle = bla;
        arrow.strokeStyle = 'black';
        arrow.beginPath();
        arrow.translate(160, 130);

        arrow.clearRect(0, 0, 300, 300);
        arrow.rotate((Math.PI / 180) * (-15) * b[c]); /*15도씩 바늘이 움직임*/

        arrow.arc(102.5, 0, 5, 0, Math.PI * 2, true);
        arrow.stroke();
        arrow.closePath();

        arrow.beginPath();
        arrow.moveTo(100, 0);
        arrow.lineTo(0, 0);
        arrow.stroke();
        arrow.closePath();

        arrow.beginPath();
        arrow.arc(0, 0, 2, 0, Math.PI * 2, true);
        arrow.stroke();
        arrow.closePath();

        ctx.restore();

        ctx.font = '30px 맑은 고딕';
        ctx.fillStyle = 'black';
        ctx.textAlign = 'center';
        ctx.fillText((c * 8.4).toFixed(2), 160, 180);


      }

      init();

      document.getElementById("deeptable").style.visibility = 'hidden';
      document.getElementById("hightest").style.visibility = 'hidden';
    </script>


  </div>

  <div class="list">
    {{chartname}}
    {{stockcode3}}
  </div>
  <div class="left">
    <!-- Styles -->
    <style>
      #chartcontrols {
        height: auto;
        padding: 5px 5px 0 16px;
        max-width: 100%;
      }

      #chartdiv {
        width: 100%;
        height: 600px;
        max-width: 100%;
      }
    </style>

    <!-- Resources -->
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/stock.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

    <!-- Chart code -->
    <script type="text/javascript">

      am5.ready(function () {

        // Create root element
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/getting-started/#Root_element
        var root = am5.Root.new("chartdiv");


        // Set themes
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/concepts/themes/
        root.setThemes([
          am5themes_Animated.new(root)
        ]);


        // Create a stock chart
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock-chart/#Instantiating_the_chart
        var stockChart = root.container.children.push(am5stock.StockChart.new(root, {
        }));


        // Set global number format
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/concepts/formatters/formatting-numbers/
        root.numberFormatter.set("numberFormat", "#,###.00");


        // Create a main stock panel (chart)
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock-chart/#Adding_panels
        var mainPanel = stockChart.panels.push(am5stock.StockPanel.new(root, {
          wheelY: "zoomX",
          panX: true,
          panY: true
        }));


        // Create value axis
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
        var valueAxis = mainPanel.yAxes.push(am5xy.ValueAxis.new(root, {
          renderer: am5xy.AxisRendererY.new(root, {
            pan: "zoom"
          }),
          extraMin: 0.1, // adds some space for for main series
          tooltip: am5.Tooltip.new(root, {}),
          numberFormat: "#,###.00",
          extraTooltipPrecision: 2
        }));

        var dateAxis = mainPanel.xAxes.push(am5xy.GaplessDateAxis.new(root, {
          baseInterval: {
            timeUnit: "day",
            count: 1
          },
          renderer: am5xy.AxisRendererX.new(root, {}),
          tooltip: am5.Tooltip.new(root, {})
        }));


        // Add series
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
        var valueSeries = mainPanel.series.push(am5xy.CandlestickSeries.new(root, {
          name: "MSFT",
          clustered: false,
          valueXField: "Date",
          valueYField: "Close",
          highValueYField: "High",
          lowValueYField: "Low",
          openValueYField: "Open",
          calculateAggregates: true,
          xAxis: dateAxis,
          yAxis: valueAxis,
          legendValueText: "open: [bold]{openValueY}[/] high: [bold]{highValueY}[/] low: [bold]{lowValueY}[/] close: [bold]{valueY}[/]",
          legendRangeValueText: ""
        }));


        // Set main value series
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock-chart/#Setting_main_series
        stockChart.set("stockSeries", valueSeries);


        // Add a stock legend
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock-chart/stock-legend/
        var valueLegend = mainPanel.plotContainer.children.push(am5stock.StockLegend.new(root, {
          stockChart: stockChart
        }));


        // Create volume axis
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/xy-chart/axes/
        var volumeAxisRenderer = am5xy.AxisRendererY.new(root, {
          inside: true
        });

        volumeAxisRenderer.labels.template.set("forceHidden", true);
        volumeAxisRenderer.grid.template.set("forceHidden", true);

        var volumeValueAxis = mainPanel.yAxes.push(am5xy.ValueAxis.new(root, {
          numberFormat: "#.#a",
          height: am5.percent(20),
          y: am5.percent(100),
          centerY: am5.percent(100),
          renderer: volumeAxisRenderer
        }));

        // Add series
        // https://www.amcharts.com/docs/v5/charts/xy-chart/series/
        var volumeSeries = mainPanel.series.push(am5xy.ColumnSeries.new(root, {
          name: "Volume",
          clustered: false,
          valueXField: "Date",
          valueYField: "Volume",
          xAxis: dateAxis,
          yAxis: volumeValueAxis,
          legendValueText: "[bold]{valueY.formatNumber('#,###.0a')}[/]"
        }));

        volumeSeries.columns.template.setAll({
          strokeOpacity: 0,
          fillOpacity: 0.5
        });

        // color columns by stock rules
        volumeSeries.columns.template.adapters.add("fill", function (fill, target) {
          var dataItem = target.dataItem;
          if (dataItem) {
            return stockChart.getVolumeColor(dataItem);
          }
          return fill;
        })


        // Set main series
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock-chart/#Setting_main_series
        stockChart.set("volumeSeries", volumeSeries);
        valueLegend.data.setAll([valueSeries, volumeSeries]);


        // Add cursor(s)
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/xy-chart/cursor/
        mainPanel.set("cursor", am5xy.XYCursor.new(root, {
          yAxis: valueAxis,
          xAxis: dateAxis,
          snapToSeries: [valueSeries],
          snapToSeriesBy: "y!"
        }));


        // Add scrollbar
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/xy-chart/scrollbars/
        var scrollbar = mainPanel.set("scrollbarX", am5xy.XYChartScrollbar.new(root, {
          orientation: "horizontal",
          height: 50
        }));
        stockChart.toolsContainer.children.push(scrollbar);

        var sbDateAxis = scrollbar.chart.xAxes.push(am5xy.GaplessDateAxis.new(root, {
          baseInterval: {
            timeUnit: "day",
            count: 1
          },
          renderer: am5xy.AxisRendererX.new(root, {})
        }));

        var sbValueAxis = scrollbar.chart.yAxes.push(am5xy.ValueAxis.new(root, {
          renderer: am5xy.AxisRendererY.new(root, {})
        }));

        var sbSeries = scrollbar.chart.series.push(am5xy.LineSeries.new(root, {
          valueYField: "Close",
          valueXField: "Date",
          xAxis: sbDateAxis,
          yAxis: sbValueAxis
        }));

        sbSeries.fills.template.setAll({
          visible: true,
          fillOpacity: 0.3
        });

        // Set up series type switcher
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock/toolbar/series-type-control/
        var seriesSwitcher = am5stock.SeriesTypeControl.new(root, {
          stockChart: stockChart
        });

        seriesSwitcher.events.on("selected", function (ev) {
          setSeriesType(ev.item.id);
        });

        function getNewSettings(series) {
          var newSettings = [];
          am5.array.each(["name", "valueYField", "highValueYField", "lowValueYField", "openValueYField", "calculateAggregates", "valueXField", "xAxis", "yAxis", "legendValueText", "stroke", "fill"], function (setting) {
            newSettings[setting] = series.get(setting);
          });
          return newSettings;
        }

        function setSeriesType(seriesType) {
          // Get current series and its settings
          var currentSeries = stockChart.get("stockSeries");
          var newSettings = getNewSettings(currentSeries);

          // Remove previous series
          var data = currentSeries.data.values;
          mainPanel.series.removeValue(currentSeries);

          // Create new series
          var series;
          switch (seriesType) {
            case "line":
              series = mainPanel.series.push(am5xy.LineSeries.new(root, newSettings));
              break;
            case "candlestick":
            case "procandlestick":
              newSettings.clustered = false;
              series = mainPanel.series.push(am5xy.CandlestickSeries.new(root, newSettings));
              if (seriesType == "procandlestick") {
                series.columns.template.get("themeTags").push("pro");
              }
              break;
            case "ohlc":
              newSettings.clustered = false;
              series = mainPanel.series.push(am5xy.OHLCSeries.new(root, newSettings));
              break;
          }

          // Set new series as stockSeries
          if (series) {
            valueLegend.data.removeValue(currentSeries);
            series.data.setAll(data);
            stockChart.set("stockSeries", series);
            var cursor = mainPanel.get("cursor");
            if (cursor) {
              cursor.set("snapToSeries", [series]);
            }
            valueLegend.data.insertIndex(0, series);
          }
        }


        // Stock toolbar
        // -------------------------------------------------------------------------------
        // https://www.amcharts.com/docs/v5/charts/stock/toolbar/
        var toolbar = am5stock.StockToolbar.new(root, {
          container: document.getElementById("chartcontrols"),
          stockChart: stockChart,
          controls: [
            seriesSwitcher,
            // am5stock.IndicatorControl.new(root, {
            //   stockChart: stockChart,
            //   legend: valueLegend
            // }),
            am5stock.DateRangeSelector.new(root, {
              stockChart: stockChart
            }),
            am5stock.PeriodSelector.new(root, {
              stockChart: stockChart
            }),
            
            // seriesSwitcher,
            // am5stock.DrawingControl.new(root, {
            //   stockChart: stockChart
            // }),
            // am5stock.ResetControl.new(root, {
            //   stockChart: stockChart
            // }),
             //am5stock.SettingsControl.new(root, {
             //  stockChart: stockChart
          // })
          ]
        })

        var cData1 = "{{cData}}"
        
        if (cData1 == "") {
          cData1 = "{{testchart}}"

        }

        
        var cData = cData1.replace(/&#x27;/gi, "\"");
        
        var data1 = "{\"data\":" + cData + "}";
        
        
        data1 = data1.trim();
        var testdata = JSON.parse(data1);
        
        
        var data = testdata.data;
        
        console.log(data);
        
        valueSeries.data.setAll(data);
        volumeSeries.data.setAll(data);
        sbSeries.data.setAll(data);


      }); 
    </script>
    
    <div id="chartcontrols"></div>
    <div id="chartdiv"></div>
    <a href="javascript:void(0)" id="prev">이전</a>
    <a href="javascript:void(0)" id="next">다음</a>
    <div class="rolling_panel">
      <ul>
        <li><img src="{{image0}}" style=" width:130px; height:70px; "/></br><a href="{{link0}}"  target='_blank'>{{my_title0}}</a></br></li>        
        <li><img src="{{image1}}" style="width:130px; height:70px;"/></br><a href="{{link1}}"  target='_blank'>{{my_title1}}</a></br></li>
        <li><img src="{{image2}}" style="width:130px; height:70px;"/></br><a href="{{link2}}"  target='_blank'>{{my_title2}}</a></br></li>
        <li><img src="{{image3}}" style="width:130px; height:70px;"/></br><a href="{{link3}}"  target='_blank'>{{my_title3}}</a></br></li>
        <li><img src="{{image4}}" style="width:130px; height:70px;"/></br><a href="{{link4}}"  target='_blank'>{{my_title4}}</a></br></li>
        <li><img src="{{image5}}" style="width:130px; height:70px;"/></br><a href="{{link5}}" target='_blank'>{{my_title5}}</a></br></li>
        <li><img src="{{image6}}" style="width:130px; height:70px;"/></br><a href="{{link6}}" target='_blank'>{{my_title6}}</a></br></li>
        <li><img src="{{image7}}" style="width:130px; height:70px;"/></br><a href="{{link7}}" target='_blank'>{{my_title7}}</a></br></li>
        <li><img src="{{image8}}" style="width:130px; height:70px;"/></br><a href="{{link8}}" target='_blank'>{{my_title8}}</a></br></li>
        <li><img src="{{image9}}" style="width:130px; height:70px;"/></br><a href="{{link9}}" target='_blank'>{{my_title9}}</a></br></li>
      </ul>
    </div>

    <script type="text/javascript">
      $(document).ready(function () {

        var $panel = $(".rolling_panel").find("ul");

        var itemWidth = $panel.children().outerWidth(); // 아이템 가로 길이
        var itemLength = $panel.children().length;      // 아이템 수

        // Auto 롤링 아이디
        var rollingId;

        auto();

       

        // 이전 이벤트
        $("#prev").on("click", prev);

        $("#prev").mouseover(function (e) {
          clearInterval(rollingId);
        });

        $("#prev").mouseout(auto);

        // 다음 이벤트
        $("#next").on("click", next);

        $("#next").mouseover(function (e) {
          clearInterval(rollingId);
        });

        $("#next").mouseout(auto);

        function auto() {
          start();
          
          // 5초마다 start 호출
          rollingId = setInterval(function () {
            start();
          }, 5000);
        }
        
        function start() {
          $panel.css("width", itemWidth * itemLength);
          $panel.animate({ "left": - itemWidth + "px" }, function () {

            // 첫번째 아이템을 마지막에 추가하기
            $(this).append("<li>" + $(this).find("li:first").html() + "</li>");

            // 첫번째 아이템을 삭제하기
            $(this).find("li:first").remove();

            // 좌측 패널 수치 초기화
            $(this).css("left", 0);
          });
        }

        // 이전 이벤트 실행
        function prev(e) {
          $panel.css("left", - itemWidth);
          $panel.prepend("<li>" + $panel.find("li:last").html() + "</li>");
          $panel.animate({ "left": "0px" }, function () {
            $(this).find("li:last").remove();
          });
        }

        // 다음 이벤트 실행
        function next(e) {
          $panel.animate({ "left": - itemWidth + "px" }, function () {
            $(this).append("<li>" + $(this).find("li:first").html() + "</li>");
            $(this).find("li:first").remove();
            $(this).css("left", 0);
          });
        }
      });
    </script>

    <!-- HTML -->




  </div>
</body>


</html>